{{- $view := or .Design.view "custom_view_a" -}}
{{- $tpl  := printf "views/%s.html" $view -}}

{{- $folders := .Content.filters.folders | default (slice) -}}
{{- $all := where site.RegularPages "Draft" "!=" true -}}

{{- $pages := $all -}}
{{- if gt (len $folders) 0 -}}
  {{- $pages = where $all "Section" "in" $folders -}}
{{- end -}}

{{- $pages = sort $pages "Date" "desc" -}}
{{- $n := or .Content.count 9 -}}
{{- $pages = first $n $pages -}}

{{- range $pages -}}
  {{ partial $tpl (dict "page" .) }}
{{- end -}}
