{{- /* 1. ë·°(a,b,c) ì„¤ì •ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ê¸°ë³¸ê°’: custom_view_a) */ -}}
{{- $view := or .design.view "custom_view_a" -}}
{{- $tpl  := printf "views/%s.html" $view -}}

{{- /* 2. ì–¸ì–´ ì„¤ì •ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. */ -}}
{{- $lang := site.Language.Lang -}}
{{- with .Page }}{{- $lang = .Language.Lang -}}{{- end -}}

{{- /* 3. ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì¼ë°˜ í˜ì´ì§€(draftê°€ ì•„ë‹Œ)ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. */ -}}
{{- $all := where site.RegularPages "Lang" $lang -}}
{{- $all = where $all "Draft" "!=" true -}}

{{- /* 4. (í•µì‹¬ ìˆ˜ì •) _index.mdì—ì„œ ì§€ì •í•œ 'folders'ë¡œ í•„í„°ë§í•©ë‹ˆë‹¤. */ -}}
{{- $folders := .content.filters.folders | default (slice) -}}
{{- $pages := slice -}}

{{- if gt (len $folders) 0 -}}
  {{- /* 'folders' (hobby, study ë“±)ê°€ ì§€ì •ëœ ê²½ìš° */ -}}
  {{- range $folder := $folders -}}
    {{- /* $all(ì „ì²´) í˜ì´ì§€ì—ì„œ 'Section'(í´ë”ëª…)ì´ ì¼ì¹˜í•˜ëŠ” ê²ƒë§Œ ì°¾ìŠµë‹ˆë‹¤. */ -}}
    {{- $folderPages := where $all "Section" $folder -}}

    {{- /* ğŸš¨ ë¬¸ì œì˜ 'Type' í•„í„°ë¥¼ ì—¬ê¸°ì„œ ì œê±°í–ˆìŠµë‹ˆë‹¤. ğŸš¨ */ -}}

    {{- $pages = $pages | append $folderPages -}}
  {{- end -}}
{{- else -}}
  {{- /* 'folders'ê°€ ì—†ìœ¼ë©´, ëª¨ë“  í˜ì´ì§€ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•©ë‹ˆë‹¤. */ -}}
  {{- $pages = $all -}}
{{- end -}}

{{- /* 5. ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤. */ -}}
{{- $pages = sort $pages "Date" "desc" -}}

{{- /* 6. _index.mdì—ì„œ ì§€ì •í•œ 'count' (3ê°œ)ë§Œí¼ ì˜ë¼ëƒ…ë‹ˆë‹¤. */ -}}
{{- $n := or .content.count 9 -}}
{{- $pages = first $n $pages -}}

{{- /* 7. í•„í„°ë§ëœ í˜ì´ì§€ë§Œí¼ ë°˜ë³µí•˜ì—¬, ì§€ì •ëœ ë·°(a,b,c)ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤. */ -}}
{{- range $pages -}}
  {{ partial $tpl (dict "page" .) }}
{{- end -}}